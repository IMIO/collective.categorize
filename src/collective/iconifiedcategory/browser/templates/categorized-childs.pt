<tal:defines define="can_view view/can_view">
  <tal:if i18n:domain="collective.iconifiedcategory" condition="can_view">
  <tal:block repeat="category view/categories_ids"
             define="infos view/infos">
  <div id="" style="display: none;" tal:attributes="id category">
    <ul>
      <li tal:repeat="element python: infos[category]">
        <tal:if condition="element/preview_status/converted">
        <a href="" target="_blank" tal:attributes="href string:${element/absolute_url}/documentviewer#document/p1">
          <img src="" alt="" tal:attributes="src element/icon_url;
                                             alt element/category_title;
                                             title element/category_title" />
          <span tal:content="element/title"></span>
        </a>
        </tal:if>
        <tal:if condition="not: element/preview_status/converted">
        <a href="" tal:attributes="href element/absolute_url">
          <img src="" alt="" tal:attributes="src element/icon_url;
                                             alt element/category_title;
                                             title element/category_title" />
          <span tal:content="element/title"></span>
        </a>
        </tal:if>
        <tal:if condition="element/download_url">
        <a href="" tal:attributes="href element/download_url">
          <img src="" alt="Download"
               tal:attributes="src string:${element/absolute_url}/download_icon.png"
               i18n:attributes="alt Download" />
        </a>
        </tal:if>
        <tal:if condition="element/preview_status/converted">
        <a href="" tal:attributes="href string:${element/absolute_url}/view">
          <img src="" alt="View"
               tal:attributes="src string:${element/absolute_url}/file_icon.png"
               i18n:attributes="alt View" />
        </a>
        </tal:if>
      </li>
    </ul>
  </div>
  </tal:block>
  
  <div class="categorized-elements" tal:define="cat_infos view/categories_infos">
    <tal:block repeat="element cat_infos">
      <a href="" class="tooltip deactivated"
         tal:attributes="href string:#${element/id};
                         title element/title">
        <span tal:content="element/counts"></span>
        <img src="" alt="" tal:attributes="src element/icon;
                                           alt element/title;
                                           title element/title" />
      </a>
    </tal:block>
    <div style="clear: both;"></div>
  </div>
  </tal:if>

  <tal:nothing condition="not:can_view">
    <span class="discreet" i18n:translate="">Nothing.</span>
  </tal:nothing>
</tal:defines>